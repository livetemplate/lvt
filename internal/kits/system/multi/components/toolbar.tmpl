{{/* Toolbar component with Add button, Search, and Sort */}}
{{define "toolbar"}}
[[- if needsArticle .CSSFramework]]
<article>
[[- else if ne (boxClass .CSSFramework) ""]]
<div class="[[boxClass .CSSFramework]]">
[[- else]]
<div>
[[- end]]
  <div style="display: flex; gap: 1rem; align-items: center; flex-wrap: wrap;">
    <!-- Search -->
    <div style="flex: 1; min-width: 200px; position: relative;">
      <style>input[type="search"]::-webkit-search-cancel-button { -webkit-appearance: none; display: none; }</style>
      <input[[if ne (inputClass .CSSFramework) ""]] class="[[inputClass .CSSFramework]]"[[end]] type="search" name="query" placeholder="Search [[.ResourceNameLower]]..." value="{{.SearchQuery}}" lvt-input="search" lvt-debounce="300" style="padding-right: 2rem;">
      <button type="button" lvt-click="search" lvt-data-query="" onclick="this.previousElementSibling.value=''; this.style.display='none';" style="position: absolute; right: 0.5rem; top: 50%; transform: translateY(-50%); background: none; border: none; cursor: pointer; padding: 0.25rem; color: #9ca3af; font-size: 1.25rem; line-height: 1;{{if not .SearchQuery}} display: none;{{end}}" title="Clear search">&times;</button>
    </div>

    <!-- Sort -->
    <div style="min-width: 200px;">
[[- if ne (selectWrapperClass .CSSFramework) ""]]
      <div class="[[selectWrapperClass .CSSFramework]]">
[[- end]]
        <select[[if ne (selectClass .CSSFramework) ""]] class="[[selectClass .CSSFramework]]"[[end]] name="sort_by" lvt-change="sort" data-expected-value="{{.SortBy}}">
          <option value="" {{if eq .SortBy ""}}selected{{end}}>Newest First</option>
[[- range $i, $f := .Fields]]
[[- if and (eq $i 0) (eq $f.GoType "string")]]
          <option value="[[$f.Name]]_asc" {{if eq $.SortBy "[[$f.Name]]_asc"}}selected{{end}}>[[$f.Name | title]] (A-Z)</option>
          <option value="[[$f.Name]]_desc" {{if eq $.SortBy "[[$f.Name]]_desc"}}selected{{end}}>[[$f.Name | title]] (Z-A)</option>
[[- end]]
[[- end]]
          <option value="oldest_first" {{if eq .SortBy "oldest_first"}}selected{{end}}>Oldest First</option>
        </select>
[[- if ne (selectWrapperClass .CSSFramework) ""]]
      </div>
[[- end]]
    </div>

    <!-- Add Button -->
    <button[[if ne (buttonClass .CSSFramework "primary") ""]] class="[[buttonClass .CSSFramework "primary"]]"[[end]] lvt-modal-open="add-modal">
      + Add [[.ResourceNameSingular]]
    </button>
  </div>
[[- if needsArticle .CSSFramework]]
</article>
[[- else]]
</div>
[[- end]]
{{end}}
