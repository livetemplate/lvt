# {{ .ProjectName }} - Docker Deployment

Generated by lvt gen stack docker

## Configuration

- **Database:** {{ .Database }}
{{- if eq .Backup "litestream" }}
- **Backup:** Litestream to {{ .Storage }}
{{- end }}
{{- if ne .Redis "none" }}
- **Redis:** {{ .Redis }}
{{- end }}
{{- if ne .Storage "none" }}
- **Storage:** {{ .Storage }}
{{- end }}

## Quick Start

1. Copy `.env.example` to `.env` and configure:
   ```bash
   cp .env.example .env
   # Edit .env with your values
   ```

2. Build and start:
   ```bash
   docker compose up -d
   ```

3. View logs:
   ```bash
   docker compose logs -f app
   ```

4. Stop:
   ```bash
   docker compose down
   ```

## Environment Variables

See `.env.example` for required environment variables.

{{- if eq .Database "postgres" }}

### PostgreSQL

The PostgreSQL container requires:
- `POSTGRES_PASSWORD` - Set a strong password
- `DATABASE_URL` - Connection string for the app

{{- end }}

{{- if eq .Backup "litestream" }}

### Litestream Backup

Configure backup credentials in `.env`:
{{- if eq .Storage "s3" }}
- `AWS_ACCESS_KEY_ID`
- `AWS_SECRET_ACCESS_KEY`
- `STORAGE_BUCKET`
- `STORAGE_REGION`
{{- end }}

See `litestream.yml` for backup configuration.

{{- end }}

## Production Deployment

1. Set strong passwords in `.env`
2. Configure firewall rules
3. Set up SSL/TLS (use reverse proxy like Nginx or Caddy)
4. Enable monitoring and logging
5. Set up automated backups

## Troubleshooting

### App won't start

Check logs:
```bash
docker compose logs app
```

### Database connection failed

{{- if eq .Database "postgres" }}
Ensure PostgreSQL is healthy:
```bash
docker compose ps postgres
docker compose logs postgres
```
{{- end }}

{{- if eq .Database "sqlite" }}
Ensure data volume is mounted:
```bash
docker compose exec app ls -la /app/data
```
{{- end }}

### Backup not working

{{- if eq .Backup "litestream" }}
Check Litestream logs:
```bash
docker compose logs litestream
```

Verify credentials in `.env` are correct.
{{- else }}
No backup configured. Consider adding `--backup=litestream` when generating.
{{- end }}
